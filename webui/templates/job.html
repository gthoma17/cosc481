$def with (job, user, apiUrl)
<!DOCTYPE html>
<html lang="en">
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.css" type="text/css" media="screen" />
<link type=text/css rel=stylesheet href="//www.gstatic.com/authtoolkit/css/gitkit.css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script type="text/javascript" src="//www.gstatic.com/authtoolkit/js/gitkit.js"></script>
<script type=text/javascript>
  window.google.identitytoolkit.signInButton(
    '#navbar', // accepts any CSS selector
    {
      widgetUrl: "/login",
      signOutUrl: "/logout",
    }
  );
</script>
<title>Jobn - $job['name']</title>
<script src="/static/job_ajax.js"></script>
<link rel="stylesheet" type="text/css" href="/static/style.css">
<link rel="icon" type="image/png" href="/static/favicon.png">
</head>
<body>


<!-- navigation bar -->
<nav role="navigation" class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
		<!--brand and toggle grouped for better mobile display-->
		<a href="http://gat.im/dashboard" class="pull-left"><img class="logo" alt="Jobn" src="/static/logo_small.png"  /></a>
		
		<div class="navbar-brand"></div>
		

		<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
			
			<span class="sr-only">Toggle navigation</span>
			
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			
		</button>
		
    </div>
	<!--content for toggling-->
    <div class="collapse navbar-collapse">
	
		<ul class="nav navbar-nav">
			
			<li style="z-index:512;" class="pages"><a href="/jobs">Jobs</a></li>
			<li style="z-index:512;" class="pages"><a href="/dashboard">Dashboard</a></li>
			<li style="z-index:512;" id="accountSwticherLI"><div id="accountSwitcher"><div id="navbar" style="vertical-align:middle;width:100%;" class="center-block"></div></div></li>
				
		</ul>
		
	</div>
  </div>
</nav>
<!-- end navigation bar -->

<!-- Begin Job Information -->
	$if job['phase'] == "open":
		$ color = "card-success"
	$else:
		$ color = "card-danger"
	$ job['location'] = job['street_address']+" "+job['city']+" "+job['state']+" "+job['zip']
	<div class="container">
		<div class="row">
			<div class="col-sm-12">
				<div class="card $color job-info" style="border-width:.15rem;">
					<div class="card-header">
						<h1 class="job-show text-center" id="job-name">$job['name']<small><a id="edit-job" href="#"> (edit)</a></small></h1>
						<h1 class="job-edit text-center"><input type="text" id="edit-job-name" name="jobName" size="10" /><small><a id="edit-job" href="#"> (save)</a></small></h1>
					</div>
					<div class="card-block" style="background-color: #f5f5f5;border-bottom: .0625rem solid #e5e5e5;padding:0.5rem;">
						<div class="row" style="border-bottom: .0625rem solid #e5e5e5;padding-bottom:0.5rem;">
							<div class="col-sm-6 job-show">
								Location:
								<a href="http://maps.apple.com/?q=$job['location']" target="blank" role="button" class="btn btn-primary" aria-label="Left Align">
                  					<span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span>$job['street_address'] $job['city']
                				</a>
            				</div>
							<div class="col-sm-6 job-edit">
									Street: <input name="job-street" value="$job['street_address']" type="text" /><br>
									City: <input name="job-city" value="$job['city']" type="text" /><br>
									State: <input name="job-state" value="$job['state']" type="text" /><br>
									Zip: <input name="job-zip" value="$job['zip']" type="text" /><br>
							</div>
							<div class="col-sm-6 job-show"><p style="margin-bottom: 0px;">Customer:</p></div>
							<div class="col-sm-6 job-edit"><p style="margin-bottom: 0px;">Customer: <input type="text" name="customer" size="20" /></p></div>
						</div>
	    				<div class="row" style="border-bottom: .0625rem solid #e5e5e5;padding-bottom:0.5rem;">
	    					<div class="col-sm-6 job-display job-show"><p style="margin-bottom: 0px;">Supervisor: </p></div>
							<div class="col-sm-6 job-edit"><p style="margin-bottom: 0px;">Supervisor: <input type="text" name="supervisor" size="20" /></p></div>
	    					<div class="col-sm-6 job-show"><p style="margin-bottom: 0px;">Manager: </p></div>
							<div class="col-sm-6 job-edit"><p style="margin-bottom: 0px;">Manager: <input type="text" name="manager" size="20" /></p></div>
	    				</div>
	    				$if user['permissionLevel'].upper() == "ADMIN" or user['permissionLevel'].upper() == "MANAGER":
	    					<div class="row">
	    						<div class="col-sm-6 job-show"><p style="margin-bottom: 0px;">Budget availiable: </p></div>
								<div class="col-sm-6 job-edit"><p style="margin-bottom: 0px;">Budget availiable: <input type="text" name="budget_available" size="10" /></p></div>
	    						<div class="col-sm-6 job-show"><p style="margin-bottom: 0px;">Budget allocated: </p></div>
								<div class="col-sm-6 job-edit"><p style="margin-bottom: 0px;">Budget allocated: <input type="text" name="budget_allocated" size="10" /></p></div>
	    					</div>
					</div>
					<div class="card-block job-show" id="job-desc" style="background-color: #f5f5f5;">
						<p style="margin-bottom: 0px;">$job['description']</p>
					</div>
					<div class="card-block job-edit" style="background-color: #f5f5f5;">
						<p style="margin-bottom: 0px;"><textarea id="edit-job-desc" name="job_description" style="width: 280px; height: 50px;"></textarea></p>
					</div>
					<div class="card-footer text-muted small">
						<div class="container">
							<div class="col-sm-3 job-show"><p style="margin-bottom: 0px;">Phase: $job['phase']</p></div>
							<div class="col-sm-3 job-edit"><p style="margin-bottom: 0px;">Phase: $job['phase'] <select class="" id=""><option value="Open" selected>Open</option><option value="Billed">Billed</option><option value="Closed">Closed</option></select></p></div>
							<div class="col-sm-3 job-show"><p style="margin-bottom: 0px;">Opened: $job['date_started']</p></div>
							$if job['date_closed']:
								<div class="col-sm-3 job-show"><p style="margin-bottom: 0px;">Closed: $job['date_closed']</p></div>
							$if job['date_billed']:
								<div class="col-sm-3 job-show"><p style="margin-bottom: 0px;">Billed: $job['date_billed']</p></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

<!-- End Job Information -->

<!-- Begin Photo Stuff -->
	<hr>
	<div class="text-center"><h3>Photos <small><button id="hide-photos">[-]</button><button id="show-photos">[+]</button></div></small></h3>
	<div id="photos-container" class="container">
	    <div class="col-sm-3" id="add-image-card">
	        <div class="card text-center card-info">
	        	<div class="card-header">
						<h5 class="card-title">Add a Photo</h5>
				</div>
	        	<div class="card-block">
	            	<input id="img-file" type="file" accept="image/*">
            	</div>
            	<div id="img-preview-container">
	            	<div class="card-block" style="max-height: 200px">
	            		<img id="img-preview" style="max-height: 200px; max-width: 100%">
	            		<br>
	            		<img id="img-loader" src="http://i.imgur.com/Bcv89it.gif">
	            	</div>
	            	<div class="card-block">
	            	    <button id="submitImage">Submit</button>
	            	    <button id="cancelImage">Cancel</button>
        	    	</div>
    	    	</div>
	        </div>
	    </div>
	    <div class="col-sm-9">
	        <div class="container">
	            <div class="card-group" id="gallery">    
	        		$for photo in job['photos']:
	        		    <div class="col-sm-2">
	       		        	<a class="gallery" rel="gallery01" href="$photo['link']"><div style="height: 100px"><img src="$photo['link']" class="card-img-top" style="max-height: 100%; max-width: 100%" alt=""/></div></a>
	        		    </div>
	    		</div>
	   		</div>
		</div>
	</div>

<!-- End Photo Stuff -->


$if user['permissionLevel'].upper() == "ADMIN" or user['permissionLevel'].upper() == "MANAGER":
	<hr>
	<!-- Begin Budget Stuff -->
		<div id="apiResponse"></div>
		<div class="text-center"><h3>Budget <small><button id="hide-budget">[-]</button><button id="show-budget">[+]</button></div></small></h3>
		<div class="table-responsive" id="budget-table-div">
		<table id="budget-table" class="table table-striped table-condensed table-bordered text-center">
  		<thead>
  			<tr>
  				<th class="text-center">Name</th>
  				<th class="text-center">Type</th>
  				<th class="text-center">Cost</th>
  				<th>&nbsp;</th>
  			</tr>
  		</thead>
  		<tbody>
		$if 'budget' in job:
			$for item in job['budget']:
				<tr id="item_$item['id']">
					<td>
						<div id="name_$item['id']">$item['name']</div>
    	          		<input type="text" class="edit_row" id="name_edit_$item['id']" name="name" size="10" value="$item['name']"/>
					</td>
					<td>
						<div id="type_$item['id']">$item['type']</div>
    	          		<select id="type_edit_$item['id']" class="edit_row"><option value="select" selected>Type</option><option value="Labor">Labor</option><option value="Material">Material</option><option value="Misc">Misc</option></select>
					</td>
					<td>
						<div id="cost_$item['id']">$item['cost']</div>
    	          		<input type="text" id="cost_edit_$item['id']" class="edit_row" name="cost" size="5" value="$item['cost']"/>
					</td>
					<td>
						<div id="buttons_$item['id']"><button class="edit_button" id="edit_$item['id']">Edit</button><button class="delete_button" id="delete_$item['id']">Delete</button></div>
    	         		<div id="buttons_edit_$item['id']" class="edit_row"><button class="save_button" id="save_$item['id']">Save</button><button class="cancel_button" id="cancel_$item['id']">Cancel</button></div>
					</td>
				</tr>
		$else:
			<tr>
				<td colspan="4">No budget items yet...</td>
			</tr>
		<tr>
			
		</tr>
		<tr>
			<td colspan="4" id="showBudgetAdd"><button>Add a budget item</button></td>
			<td class="addItemForm"><input type="text" id="name" name="name" size="30" placeholder="Name"/></td>
			<td class="addItemForm"><select  id="type"><option value="select" selected>Type</option><option value="Labor">Labor</option><option value="Material">Material</option><option value="Misc">Misc</option></select></td>
			<td class="addItemForm"><input type="text" id="cost" name="cost" size="30" placeholder="Cost"/></td>
			<td class="addItemForm"><button  id="budgetAdd">Add</button><button id="cancelBudgetAdd">Cancel</button></td>
		</tr>
  		</tbody>
		</table>
  		</div>
  	<!-- End Budget Stuff -->

	

<!-- Begin Note Stuff -->
	<hr>
	<div class="text-center"><h3>Notes <small><button id="hide-notes">[-]</button><button id="show-notes">[+]</button></div></small></h3>
	<div class="container" id="notes-container">
		<div class="col-sm-4">
			<div class="card-group">
				<div class="card add-note-card text-center" id="add-note-card">
					<div class="card-header">
						<h5 class="card-title">Add a Note</h5>
					</div>
					<div class="card-block">
						<p>
							Note Type: <br>
							<input type="radio" id="note-type-note" name="note-type" value="note" onclick="selectedNote()" checked> Note
							<input type="radio" id="note-type-dailyReport" name="note-type" onclick="selectedDailyReport()" value="dailyReport"> Daily Report
							<input type="radio" id="note-type-actionItem" name="note-type" onclick="selectedActionItem()" value="actionItem"> Action Item
						</p>
						<p>
							Message: <br>
							<textarea id="note-message"></textarea>
						</p>
						<p class="daily-report-field">
							People On Site: <br>
							<textarea id="note-PeopleOnSite"></textarea>
						</p>
						<p class="daily-report-field">
							Arrival Time:<br><span class="date-time-error">24-hour format:<br>hh:mm<br></span>
							<input id="note-arrivalTime" type="time" placeholder=" "> <br><br>
							Departure Time:<br> <span class="date-time-error">24-hour format:<br>hh:mm<br></span>
							<input id="note-departureTime" type="time">
						</p>
						<p class="action-item-field">
							Assignee: <br>
							<input id="note-assignee" type="text">
						</p>
					</div>
					<div class="card-footer">
						<button id="submitNote" onclick="notesAjax();">Submit</button>
					</div>
				</div>
			</div>
		</div>
		<div class="col-sm-6">
			<div class="container">
				<div class="card-group note-card-group" id="note-card-group"> 
					$for note in job['notes']:
						$if note['tbl'] == 'dailyReports':
							$ type = "Daily Report"
							$ cardType = "card-warning"
						$if note['tbl'] == 'actionItems':
							$ type = "Action Item"
							$ cardType = "card-danger"
						$if note['tbl'] == 'notes':
							$ type = "Note"
							$ cardType = "card-info"
						<div class="col-xs-12 col-md-12">
						<div class="card $cardType note-card text-center">
							<div class="card-header">
								<h5 class="card-title">$type <button id="note-edit-button-$note['tbl']-$note['id']">Edit</button></h5>
							</div>
							<div class="card-block">
								<p style="display:inline;" class="card-text" id="note-contents-$note['tbl']-$note['id']">$note['contents']</p>
							</div>
							$if note['tbl'] == 'dailyReports':
								<div class="card-block">
									<hr>
									<p class="card-text"><b>Arrival Time:</b> <div style="display:inline;" id="note-arrival-$note['tbl']-$note['id']">$note['arrival_time']</div></p>
									<p class="card-text"><b>Departure Time:</b> <div style="display:inline;" id="note-departure-$note['tbl']-$note['id']">$note['departure_time']</div></p>
									<hr>
									<p class="card-text"><b>People on Site:</b></p>
									<p class="card-text"><div style="display:inline;" id="note-people-$note['tbl']-$note['id']">$note['people_on_site']</div></p>
								</div>
							$if note['tbl'] == 'actionItems':
								<div class="card-block">
									<hr>
									$if note['completion_time']:
										<p class="card-text">Completed by $note['completion_user']['name'] at $note['completion_time']</p>
									$else:
										<p class="card-text">Assigned User: 
										<div style="display:inline;" id="note-assignee-$note['tbl']-$note['id']">
											$if note['assigned_user']:
												<div style="display:inline;" id="note-assigned-name-$note['tbl']-$note['id']">
													$note['assigned_user']['name'] (
													<a href="tel:$note['assigned_user']['phone']"><span class="glyphicon glyphicon-earphone"></span></a>|
													<a href="mailto:$note['assigned_user']['email']"><span class="glyphicon glyphicon-envelope"></span></a>)
												</div>
												<button class="note-add-assignee" style="display:inline;" id="note-add-assignee-$note['tbl']-$note['id']">Edit</button>
											$else:
												<button class="note-add-assignee" style="display:inline;" id="note-add-assignee-$note['tbl']-$note['id']">Add one</button>
											<select class="note-edit note-select-assignee" style="display:inline;" id="note-select-assignee-$note['tbl']-$note['id']"></select>
											<button class="note-edit note-save-assignee" style="display:inline;" id="note-save-assignee-$note['tbl']-$note['id']">Save</button>
											<button class="note-edit note-cancel-assignee" style="display:inline;" id="note-cancel-assignee-$note['tbl']-$note['id']">Cancel</button>
											<br> (not implemented)
										</div>
										</p>
										<hr>
										<p class="card-text"><button id="note-complete-button-$note['tbl']-$note['id']">Complete</button><br>(not implemented)</p>
								</div>
							<div class="card-footer text-muted small">
								Created by $note['author']['name'] at $note['entry_time']
							</div>
						</div><br>				
						</div>
			</div>
		</div>
	</div>
	</div>
<!-- End Note Stuff -->


<!-- Begin metadata -->
	<div class="hidden" id="user-name">$user['name']</div>
	<div class="hidden" id="apiKey">$user['apiKey']</div>
	<div class="hidden" id="jobId">$job['id']</div>
<!-- End metadata -->

<!-- Begin ajax templates -->
	
	<table class="hidden">
		<tbody id="budgetRowTemplate">
			<tr>
				<td>
					<div id="name_!template!"></div>
			  		<input type="text" class="edit_row" id="name_edit_!template!" name="name" size="10" />
				</td>
				<td>
					<div id="type_!template!"></div>
			  		<select id="type_edit_!template!" class="edit_row"><option value="select" selected>Type</option><option value="Labor">Labor</option><option value="Material">Material</option><option value="Misc">Misc</option></select>
				</td>
				<td>
					<div id="cost_!template!"></div>
			  		<input type="text" id="cost_edit_!template!" class="edit_row" name="cost" size="5" />
				</td>
				<td>
					<div id="buttons_!template!"><button class="edit_button" id="edit_!template!">Edit</button><button class="delete_button" id="delete_!template!">Delete</button></div>
			 		<div id="buttons_edit_!template!" class="edit_row"><button class="save_button" id="save_!template!">Save</button><button class="cancel_button" id="cancel_!template!">Cancel</button></div>
				</td>
			</tr>
		</tbody>
	</table>
	<div class="hidden" id="dailyReports-template">
		<div class="col-xs-12 col-md-12">
			<div class="card card-warning note-card text-center">
				<div class="card-header">
					<h5 class="card-title">Daily Report</h5>
				</div>
				<div class="card-block">
					<p style="display:inline;" class="card-text" id="note-contents-!tbl!-!id!"></p>
				</div>
				<div class="card-block">
					<hr>
					<p class="card-text"><b>Arrival Time:</b> <div style="display:inline;" id="note-arrival-!tbl!-!id!"></div></p>
					<p class="card-text"><b>Departure Time:</b> <div style="display:inline;" id="note-departure-!tbl!-!id!"></div></p>
					<hr>
					<p class="card-text"><b>People on Site:</b></p>
					<p class="card-text"><div style="display:inline;" id="note-people-!tbl!-!id!"></div></p>
				</div>
				<div class="card-footer text-muted small">
					Created by <div style="display:inline;" id="note-user-name-!tbl!-!id!"></div> at <div style="display:inline;" id="note-entry-time-!tbl!-!id!"></div>
				</div>
			</div>
		</div>
		<br>
	</div>
	<div class="hidden" id="actionItems-template">
		<div class="col-xs-12 col-md-12">
			<div class="card card-danger note-card text-center">
				<div class="card-header">
					<h5 class="card-title">Action Item</h5>
				</div>
				<div class="card-block">
					<p style="display:inline;" class="card-text" id="note-contents-!tbl!-!id!"></p>
				</div>
				<div class="card-block">
					<hr>
					<p class="card-text">Assigned User: 
					<div style="display:inline;" id="note-assigned-name-!tbl!-!id!"></div>
					<button style="display:inline;" id="note-add-assignee-!tbl!-!id!">Add one</button><br> (not implemented)
					</p>
					<hr>
					<p class="card-text"><button id="note-complete-button-!tbl!-!id!">Complete</button><br>(not implemented)</p>
				</div>
				<div class="card-footer text-muted small">
					Created by <div style="display:inline;" id="note-user-name-!tbl!-!id!"></div> at <div style="display:inline;" id="note-entry-time-!tbl!-!id!"></div>
				</div>
			</div>
		</div>
		<br>
	</div>
	<div class="hidden" id="notes-template">
		<div class="col-xs-12 col-md-12">
			<div class="card card-info note-card text-center">
				<div class="card-header">
					<h5 class="card-title">Note</h5>
				</div>
				<div class="card-block">
					<p style="display:inline;" class="card-text" id="note-contents-!tbl!-!id!"></p>
				</div>
				<div class="card-footer text-muted small">
					Created by <div style="display:inline;" id="note-user-name-!tbl!-!id!"></div> at <div style="display:inline;" id="note-entry-time-!tbl!-!id!"></div>
				</div>
			</div>
		</div>
		<br>
	</div>
	<div class="hidden" id="image-template" style="display:none;">
    	<div class="col-sm-2">
    		<a class="gallery" rel="!gallery!" href="!url!"><div style="height: 100px"><img src="!url!" class="card-img-top" style="max-height: 100%; max-width: 100%" alt=""/></div></a>
    	</div>
	</div>
	<div class="hidden" id="assigned-user-template" style="display:none;">
		<div style="display:inline;" id="note-assigned-name-actionItems-!id!">
			!name! (
			<a href="tel:!phone!"><span class="glyphicon glyphicon-earphone"></span></a>|
			<a href="mailto:!email!"><span class="glyphicon glyphicon-envelope"></span></a>)
		</div>
	    <button class="note-add-assignee" style="display:inline;" id="note-add-assignee-actionItems-!id!">Edit</button>
		<select class="note-edit note-select-assignee" style="display: none;" id="note-select-assignee-actionItems-!id!"></select>
		<button class="note-edit note-save-assignee" style="display: none;" id="note-save-assignee-actionItems-!id!">Save</button>
		<button class="note-edit note-cancel-assignee" style="display: none;" id="note-cancel-assignee-actionItems-!id!">Cancel</button>
		<br> (not implemented)
    </div>
<!-- End ajax templates -->

</body>
</html>
